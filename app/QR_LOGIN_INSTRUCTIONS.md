# Инструкция по использованию QR-кода для входа в приложение

## Обзор

Приложение поддерживает двухфакторную аутентификацию с использованием TOTP (Time-based One-Time Password) и QR-кодов. Это обеспечивает дополнительный уровень безопасности при входе в систему.

## Как это работает

1. **Регистрация с TOTP**: При регистрации пользователя можно включить двухфакторную аутентификацию
2. **Генерация QR-кода**: При регистрации создается QR-код, содержащий секретный ключ TOTP
3. **Настройка приложения аутентификации**: Пользователь сканирует QR-код в приложении аутентификации (Google Authenticator, Authy и т.д.)
4. **Вход**: При входе пользователь вводит код из приложения аутентификации

## Подробная инструкция

### 1. Регистрация с TOTP

1. Откройте экран входа/регистрации
2. Введите желаемый логин и пароль
3. Установите галочку "Регистрация с TOTP"
4. Нажмите "Зарегистрироваться"
5. После успешной регистрации появится QR-код

### 2. Настройка приложения аутентификации

1. Скачайте и установите приложение аутентификации:
   - Google Authenticator (Android/iOS)
   - Authy (Android/iOS)
   - Microsoft Authenticator (Android/iOS)
   - Или другое приложение, поддерживающее TOTP

2. Добавьте новый аккаунт:
   - В приложении аутентификации нажмите "+" или "Добавить аккаунт"
   - Выберите "Сканировать QR-код" (или аналогичную опцию)
   - Наведите камеру на QR-код, отображенный в приложении
   - Приложение автоматически добавит аккаунт CryptoApp

3. Альтернативный способ (ручной ввод):
   - Если не удается отсканировать QR-код, выберите "Введите код вручную"
   - Введите имя пользователя: ваш логин
   - Введите секретный ключ: ключ, отображенный под QR-кодом
   - Укажите период: 30 секунд

### 3. Вход в приложение

#### Способ 1: Стандартный вход с паролем и TOTP
1. Введите логин
2. Введите пароль
3. Введите 6-значный код из приложения аутентификации
4. Нажмите "Войти"

#### Способ 2: Вход только с TOTP
1. Введите логин
2. Оставьте поле пароля пустым
3. Введите 6-значный код из приложения аутентификации
4. Нажмите "Войти"

#### Способ 3: Вход через QR-код
1. Нажмите "Сгенерировать QR-код для входа"
2. Откройте приложение аутентификации на вашем телефоне
3. Отсканируйте QR-код
4. Введите отображенный 6-значный код в приложении
5. Нажмите "Подтвердить вход"

### 4. Особенности работы

- **Временное окно**: Коды TOTP действительны в течение 30 секунд
- **Синхронизация времени**: Убедитесь, что время на вашем устройстве и телефоне синхронизировано
- **Резервные коды**: Рекомендуется сохранить секретный ключ на случай потери телефона
- **Обновление QR-кода**: QR-код автоматически обновляется каждые 30 секунд

## Решение проблем

### Код не работает
1. Проверьте синхронизацию времени между устройствами
2. Убедитесь, что вы вводите правильный код (6 цифр)
3. Попробуйте сгенерировать новый QR-код
4. Проверьте, что приложение аутентификации настроено правильно

### Потеря телефона
1. Сохраните секретный ключ при регистрации
2. Вы можете вручную добавить аккаунт в новое приложение аутентификации
3. В крайнем случае, обратитесь к администратору системы

### Приложение аутентификации не сканирует QR-код
1. Убедитесь, что камера приложения имеет доступ
2. Попробуйте увеличить расстояние до QR-кода
3. Убедитесь, что QR-код хорошо освещен
4. Попробуйте ввести код вручную, используя секретный ключ

## Безопасность

- Никогда не передавайте свой секретный ключ третьим лицам
- Сохраняйте резервные копии секретного ключа
- Используйте надежные пароли
- Регулярно обновляйте приложения аутентификации
- Убедитесь, что ваше устройство защищено паролем или биометрической аутентификацией

## Технические детали

- Алгоритм: TOTP (RFC 6238)
- Длина кода: 6 цифр
- Период действия: 30 секунд
- Хеш-функция: SHA-1
- Длина секретного ключа: 32 символа (Base32)